### <a name="_b7urdng99y53"></a>**Название задачи:**

Передача ставок по депозитам в кол-центры (внутренний и партнёрский) в рамках MVP «Депозиты онлайн»

### <a name="_hjk0fkfyohdk"></a>**Автор:**

Команда цифровой трансформации розничного бизнеса

### <a name="_uanumrh8zrui"></a>**Дата:**

27.12.2025

---

### <a name="_3bfxc9a45514"></a>**Функциональные требования**

Опишите здесь верхнеуровневые Use Cases. Их нужно оформить в виде таблицы с пошаговым описанием:

| **№** | **Действующие лица или системы**                     | **Use Case**                 | **Описание**                                                                                                                                   |
| :---: | ---------------------------------------------------- | ---------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
|   1   | Оператор внутреннего кол-центра → Система кол-центра | Консультация по ставкам      | Оператор во время звонка клиента открывает экран ставок, выбирает продукт/срок/сумму и получает актуальные ставки из единого источника ставок. |
|   2   | Система кол-центра → Единый источник ставок          | Получение актуальных ставок  | Система кол-центра запрашивает актуальные базовые ставки и условия депозитов из сервиса ставок банка.                                          |
|   3   | Администратор ставок → Единый источник ставок        | Обновление ставок            | Уполномоченный сотрудник обновляет ставки и правила, публикуя новую актуальную версию.                                                         |
|   4   | Единый источник ставок → Контур выгрузки             | Формирование выгрузки ставок | После публикации или по расписанию формируется файл ставок (CSV/JSON) для партнёрского кол-центра.                                             |
|   5   | Контур выгрузки → Портал файлов                      | Публикация файла ставок      | Сформированный файл ставок с метаданными версии размещается на защищённом портале файлов банка.                                                |
|   6   | Партнёрский кол-центр → Портал файлов                | Получение ставок             | Партнёрский кол-центр скачивает файл ставок по HTTPS и импортирует его во внутреннюю систему.                                                  |
|   7   | Оператор партнёрского кол-центра                     | Консультация клиента         | Оператор партнёра консультирует клиента, используя загруженные из файла ставки.                                                                |
|   8   | Администратор/поддержка                              | Контроль актуальности        | Ответственные сотрудники контролируют дату и версию последней опубликованной выгрузки ставок.                                                  |

---

### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**

Опишите здесь нефункциональные требования и архитектурно значимые требования.

| **№** | **Требование**                                                                                     |
| :---: | -------------------------------------------------------------------------------------------------- |
|   1   | Доступность сервиса ставок и механизмов публикации — не ниже 99,9%.                                |
|   2   | АБС не должна участвовать в выдаче ставок и не быть точкой отказа.                                 |
|   3   | Высокая производительность чтения ставок (миллисекунды) для кол-центра и онлайн-каналов.           |
|   4   | Масштабируемость решения по чтению ставок без роста нагрузки на БД.                                |
|   5   | Разграничение доступа: внутренний кол-центр и партнёр получают только разрешённый набор данных.    |
|   6   | Версионирование ставок и возможность определить актуальность данных.                               |
|   7   | Надёжная доставка ставок партнёру без использования SFTP и без API-интеграции со стороны партнёра. |
|   8   | Шифрование трафика и защищённый доступ к файлам ставок.                                            |
|   9   | Использование существующих технологий банка (MS SQL, Oracle, Java, .NET).                          |
|  10   | Наличие логирования, мониторинга и технической документации решения.                               |

---

### <a name="_qmphm5d6rvi3"></a>**Решение**

Для реализации передачи ставок в кол-центры предлагается использовать **единый источник ставок** как центральную точку хранения и публикации условий депозитов, а также выделить отдельный контур распространения ставок.

#### Ключевые архитектурные решения:

- **Единый источник ставок (Rates Service)** используется всеми каналами: сайтом, интернет-банком и внутренним кол-центром.
- **Внутренний кол-центр** получает ставки через защищённое API сервиса ставок с учётом ролей и прав доступа.
- Для **партнёрского кол-центра** реализуется механизм **файловых выгрузок ставок**:
  - формирование версии файла (CSV/JSON) по расписанию или по событию публикации ставок;
  - размещение файла на защищённом файловом портале банка;
  - получение файла партнёром по HTTPS (скачивание), без прямых API-вызовов и без использования SFTP.
- Каждая публикация ставок имеет **версию, дату и время**, что позволяет контролировать актуальность данных и упрощает сопровождение.
- Решение не затрагивает АБС и не увеличивает нагрузку на её БД.

#### C4 Context (укрупнённо):

- Клиент → оператор кол-центра (телефон).
- Система внутреннего кол-центра → Rates Service (получение ставок).
- Rates Service → контур выгрузки → файловый портал.
- Партнёрский кол-центр → файловый портал (скачивание ставок).

#### C4 Container (ключевые контейнеры):

- Rates API + Rates DB — хранение и выдача ставок.
- Rates Exporter — генерация файлов ставок и метаданных.
- Secure File Portal — защищённая витрина файлов и аудит скачиваний.
- Система внутреннего кол-центра — UI операторов и интеграция с Rates API.

При выборе решения использовалась логика:

- минимизация нагрузки и зависимости от АБС;
- соблюдение ограничений партнёра по интеграции;
- единый источник правды для ставок;
- возможность масштабирования и развития решения в будущем.

---

### <a name="_bjrr7veeh80c"></a>**Альтернативы**

1. **Прямой API-доступ партнёрского кол-центра к сервису ставок**  
   Проще по актуальности данных, но отклонено из-за ограничений партнёра и рисков безопасности.

2. **Выгрузка ставок через SFTP**  
   Стандартный подход, но отклонён из-за прямого запрета в условиях задачи.

3. **Рассылка ставок по электронной почте**  
   Отклонено из-за отсутствия контроля версий, доставки и повышенных рисков утечек данных.

---

**Недостатки, ограничения, риски**

- Ставки у партнёрского кол-центра обновляются с задержкой относительно онлайна.
- Появляется дополнительный контур (выгрузка + портал), требующий сопровождения.
- Ошибки в регламенте обновления ставок могут привести к консультациям по устаревшим данным.
- Для дальнейшего масштабирования может потребоваться переход на событийную модель публикации ставок.
